!function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};function e(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}function i(t){return"function"==typeof t}var n=!1,r={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;n=t},get useDeprecatedSynchronousErrorHandling(){return n}};function s(t){setTimeout((function(){throw t}),0)}var o={closed:!0,next:function(t){},error:function(t){if(r.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete:function(){}},a=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function h(t){return null!==t&&"object"==typeof t}var c=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),u=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this._parentOrParents,r=this._unsubscribe,s=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var o=0;o<n.length;++o){n[o].remove(this)}if(i(r))try{r.call(this)}catch(t){e=t instanceof c?l(t.errors):[t]}if(a(s)){o=-1;for(var u=s.length;++o<u;){var d=s[o];if(h(d))try{d.unsubscribe()}catch(t){e=e||[],t instanceof c?e=e.concat(l(t.errors)):e.push(t)}}}if(e)throw new c(e)}},t.prototype.add=function(e){var i=e;if(!e)return t.EMPTY;switch(typeof e){case"function":i=new t(e);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof t)){var n=i;(i=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=i._parentOrParents;if(null===r)i._parentOrParents=this;else if(r instanceof t){if(r===this)return i;i._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return i;r.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[i]:s.push(i),i},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function l(t){return t.reduce((function(t,e){return t.concat(e instanceof c?e.errors:e)}),[])}var d=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),p=function(t){function i(e,n,r){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=o;break;case 1:if(!e){s.destination=o;break}if("object"==typeof e){e instanceof i?(s.syncErrorThrowable=e.syncErrorThrowable,s.destination=e,e.add(s)):(s.syncErrorThrowable=!0,s.destination=new f(s,e));break}default:s.syncErrorThrowable=!0,s.destination=new f(s,e,n,r)}return s}return e(i,t),i.prototype[d]=function(){return this},i.create=function(t,e,n){var r=new i(t,e,n);return r.syncErrorThrowable=!1,r},i.prototype.next=function(t){this.isStopped||this._next(t)},i.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},i.prototype._next=function(t){this.destination.next(t)},i.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},i}(u),f=function(t){function n(e,n,r,s){var a,h=t.call(this)||this;h._parentSubscriber=e;var c=h;return i(n)?a=n:n&&(a=n.next,r=n.error,s=n.complete,n!==o&&(i((c=Object.create(n)).unsubscribe)&&h.add(c.unsubscribe.bind(c)),c.unsubscribe=h.unsubscribe.bind(h))),h._context=c,h._next=a,h._error=r,h._complete=s,h}return e(n,t),n.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;r.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},n.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,i=r.useDeprecatedSynchronousErrorHandling;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;s(t)}}},n.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};r.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},n.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),r.useDeprecatedSynchronousErrorHandling)throw t;s(t)}},n.prototype.__tryOrSetError=function(t,e,i){if(!r.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(e){return r.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(s(e),!0)}return!1},n.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},n}(p);var y=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function b(t){return t}function m(t){return 0===t.length?b:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var v=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var n=this.operator,s=function(t,e,i){if(t){if(t instanceof p)return t;if(t[d])return t[d]()}return t||e||i?new p(t,e,i):new p(o)}(t,e,i);if(n?s.add(n.call(s,this.source)):s.add(this.source||r.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),r.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){r.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(t){for(;t;){var e=t,i=e.closed,n=e.destination,r=e.isStopped;if(i||r)return!1;t=n&&n instanceof p?n:null}return!0}(t)?console.warn(e):t.error(e)}},t.prototype.forEach=function(t,e){var i=this;return new(e=g(e))((function(e,n){var r;r=i.subscribe((function(e){try{t(e)}catch(t){n(t),r&&r.unsubscribe()}}),n,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[y]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:m(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=g(t))((function(t,i){var n;e.subscribe((function(t){return n=t}),(function(t){return i(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function g(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var w=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),T=function(t){function i(e,i){var n=t.call(this)||this;return n.subject=e,n.subscriber=i,n.closed=!1,n}return e(i,t),i.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}},i}(u),x=function(t){function i(e){var i=t.call(this,e)||this;return i.destination=e,i}return e(i,t),i}(p),_=function(t){function i(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return e(i,t),i.prototype[d]=function(){return new x(this)},i.prototype.lift=function(t){var e=new E(this,this);return e.operator=t,e},i.prototype.next=function(t){if(this.closed)throw new w;if(!this.isStopped)for(var e=this.observers,i=e.length,n=e.slice(),r=0;r<i;r++)n[r].next(t)},i.prototype.error=function(t){if(this.closed)throw new w;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,i=e.length,n=e.slice(),r=0;r<i;r++)n[r].error(t);this.observers.length=0},i.prototype.complete=function(){if(this.closed)throw new w;this.isStopped=!0;for(var t=this.observers,e=t.length,i=t.slice(),n=0;n<e;n++)i[n].complete();this.observers.length=0},i.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},i.prototype._trySubscribe=function(e){if(this.closed)throw new w;return t.prototype._trySubscribe.call(this,e)},i.prototype._subscribe=function(t){if(this.closed)throw new w;return this.hasError?(t.error(this.thrownError),u.EMPTY):this.isStopped?(t.complete(),u.EMPTY):(this.observers.push(t),new T(this,t))},i.prototype.asObservable=function(){var t=new v;return t.source=this,t},i.create=function(t,e){return new E(t,e)},i}(v),E=function(t){function i(e,i){var n=t.call(this)||this;return n.destination=e,n.source=i,n}return e(i,t),i.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},i.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},i.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},i.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):u.EMPTY},i}(_),O=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n.scheduler=e,n.work=i,n.pending=!1,n}return e(i,t),i.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var i=this.id,n=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(n,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},i.prototype.requestAsyncId=function(t,e,i){return void 0===i&&(i=0),setInterval(t.flush.bind(t,this),i)},i.prototype.recycleAsyncId=function(t,e,i){if(void 0===i&&(i=0),null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)},i.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},i.prototype._execute=function(t,e){var i=!1,n=void 0;try{this.work(t)}catch(t){i=!0,n=!!t&&t||new Error(t)}if(i)return this.unsubscribe(),n},i.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,i=e.actions,n=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&i.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},i}(function(t){function i(e,i){return t.call(this)||this}return e(i,t),i.prototype.schedule=function(t,e){return this},i}(u)),S=function(){function t(e,i){void 0===i&&(i=t.now),this.SchedulerAction=e,this.now=i}return t.prototype.schedule=function(t,e,i){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(i,e)},t.now=function(){return Date.now()},t}();function A(t){return t&&"function"==typeof t.schedule}var k=function(t){return function(e){for(var i=0,n=t.length;i<n&&!e.closed;i++)e.next(t[i]);e.complete()}};function L(t,e){return new v((function(i){var n=new u,r=0;return n.add(e.schedule((function(){r!==t.length?(i.next(t[r++]),i.closed||n.add(this.schedule())):i.complete()}))),n}))}function M(t,e){return e?L(t,e):new v(k(t))}var C=new(function(t){function i(e,n){void 0===n&&(n=S.now);var r=t.call(this,e,(function(){return i.delegate&&i.delegate!==r?i.delegate.now():n()}))||this;return r.actions=[],r.active=!1,r.scheduled=void 0,r}return e(i,t),i.prototype.schedule=function(e,n,r){return void 0===n&&(n=0),i.delegate&&i.delegate!==this?i.delegate.schedule(e,n,r):t.prototype.schedule.call(this,e,n,r)},i.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}},i}(S))(O);function D(t,e){return function(i){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new P(t,e))}}var P=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new R(t,this.project,this.thisArg))},t}(),R=function(t){function i(e,i,n){var r=t.call(this,e)||this;return r.project=i,r.count=0,r.thisArg=n||r,r}return e(i,t),i.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},i}(p),I=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e(i,t),i.prototype.notifyNext=function(t,e,i,n,r){this.destination.next(e)},i.prototype.notifyError=function(t,e){this.destination.error(t)},i.prototype.notifyComplete=function(t){this.destination.complete()},i}(p),F=function(t){function i(e,i,n){var r=t.call(this)||this;return r.parent=e,r.outerValue=i,r.outerIndex=n,r.index=0,r}return e(i,t),i.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},i.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},i.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},i}(p);function j(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var z=j(),N=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function U(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var B=function(t){if(t&&"function"==typeof t[y])return n=t,function(t){var e=n[y]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(N(t))return k(t);if(U(t))return i=t,function(t){return i.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,s),t};if(t&&"function"==typeof t[z])return e=t,function(t){for(var i=e[z]();;){var n=i.next();if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof i.return&&t.add((function(){i.return&&i.return()})),t};var e,i,n,r=h(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+r+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function V(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[y]}(t))return function(t,e){return new v((function(i){var n=new u;return n.add(e.schedule((function(){var r=t[y]();n.add(r.subscribe({next:function(t){n.add(e.schedule((function(){return i.next(t)})))},error:function(t){n.add(e.schedule((function(){return i.error(t)})))},complete:function(){n.add(e.schedule((function(){return i.complete()})))}}))}))),n}))}(t,e);if(U(t))return function(t,e){return new v((function(i){var n=new u;return n.add(e.schedule((function(){return t.then((function(t){n.add(e.schedule((function(){i.next(t),n.add(e.schedule((function(){return i.complete()})))})))}),(function(t){n.add(e.schedule((function(){return i.error(t)})))}))}))),n}))}(t,e);if(N(t))return L(t,e);if(function(t){return t&&"function"==typeof t[z]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new v((function(i){var n,r=new u;return r.add((function(){n&&"function"==typeof n.return&&n.return()})),r.add(e.schedule((function(){n=t[z](),r.add(e.schedule((function(){if(!i.closed){var t,e;try{var r=n.next();t=r.value,e=r.done}catch(t){return void i.error(t)}e?i.complete():(i.next(t),this.schedule())}})))}))),r}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function H(t,e,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),"function"==typeof e?function(n){return n.pipe(H((function(i,n){return(r=t(i,n),s?V(r,s):r instanceof v?r:new v(B(r))).pipe(D((function(t,r){return e(i,t,n,r)})));var r,s}),i))}:("number"==typeof e&&(i=e),function(e){return e.lift(new q(t,i))})}var q=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Y(t,this.project,this.concurrent))},t}(),Y=function(t){function i(e,i,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e)||this;return r.project=i,r.concurrent=n,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return e(i,t),i.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},i.prototype._tryNext=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,i)},i.prototype._innerSub=function(t,e,i){var n=new F(this,e,i),r=this.destination;r.add(n);var s=function(t,e,i,n,r){if(void 0===r&&(r=new F(t,i,n)),!r.closed)return e instanceof v?e.subscribe(r):B(e)(r)}(this,t,void 0,void 0,n);s!==n&&r.add(s)},i.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},i.prototype.notifyNext=function(t,e,i,n,r){this.destination.next(e)},i.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},i}(I);function W(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),H(b,t)}function $(t,e,n,r){return i(n)&&(r=n,n=void 0),r?$(t,e,n).pipe(D((function(t){return a(t)?r.apply(void 0,t):r(t)}))):new v((function(i){!function t(e,i,n,r,s){var o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var a=e;e.addEventListener(i,n,s),o=function(){return a.removeEventListener(i,n,s)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var h=e;e.on(i,n),o=function(){return h.off(i,n)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var c=e;e.addListener(i,n),o=function(){return c.removeListener(i,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var u=0,l=e.length;u<l;u++)t(e[u],i,n,r,s)}r.add(o)}(t,e,(function(t){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(t)}),i,n)}))}var Q=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new X(t,this.predicate,this.thisArg))},t}(),X=function(t){function i(e,i,n){var r=t.call(this,e)||this;return r.predicate=i,r.thisArg=n,r.count=0,r}return e(i,t),i.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},i}(p);var K=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new G(t,this.dueTime,this.scheduler))},t}(),G=function(t){function i(e,i,n){var r=t.call(this,e)||this;return r.dueTime=i,r.scheduler=n,r.debouncedSubscription=null,r.lastValue=null,r.hasValue=!1,r}return e(i,t),i.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(J,this.dueTime,this))},i.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},i.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},i.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},i}(p);function J(t){t.debouncedNext()}var Z=function(t,e,i){return Math.min(Math.max(t,e),i)},tt=new(function(){function t(){this.onScrollChangeSubj=new _,this.onScrollChange$=this.onScrollChangeSubj.asObservable(),this.scrollChangeSubscription=new u,this.initialized=!1}var e=t.prototype;return e.throwErrorIfInitialized=function(){if(this.initialized)throw Error("You can not initialize AnimateOnScroll more than once! Call destroy() first.")},e.initializeFrom=function(t){var e,i,n=this;this.throwErrorIfInitialized(),this.scrollChangeSubscription=t.pipe((e=1,void 0===i&&(i=C),function(t){return t.lift(new K(e,i))})).subscribe((function(){n.onScrollChangeSubj.next(!0)}))},e.initializeFromCallbackFn=function(t){this.initializeFrom(new v((function(e){t((function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e.next(i)}))})))},e.initializeFromElementStyleUpdates=function(t){this.throwErrorIfInitialized();var e=function(t,e){return new v((function(i){var n=new MutationObserver((function(t){i.next(t)}));n.observe(t,e);return function(){n.disconnect()}}))}(t,{attributes:!0,attributeFilter:["style"],childList:!1});this.initializeFrom(e)},e.initializeFromDomEvents=function(){this.throwErrorIfInitialized();var t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return A(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(i=t.pop())):"number"==typeof r&&(i=t.pop()),null===n&&1===t.length&&t[0]instanceof v?t[0]:W(i)(M(t,n))}($(window,"scroll"),$(window,"mousewheel"),$(window,"mouseup"),$(window,"resize"),$(window,"keypress"),$(window,"touchmove"),$(window,"touchend"));this.initializeFrom(t)},e.destroy=function(){this.scrollChangeSubscription.unsubscribe(),this.initialized=!1},t}()),et=new(function(){function t(){}var e=t.prototype;return e.getAnimationDelay=function(t,e,i){var n=window.innerHeight*e,r=window.innerHeight*i,s=t.getBoundingClientRect().y+t.getBoundingClientRect().height/2,o=Z((s-n)/(r-n),0,1);return+(100*Z(-1*(1-o),-1,0)).toFixed(2)},e.initializeAnimation=function(t,e,i,n){t.style.animation=e+" 100s "+i+" paused infinite "+n,t.style.animationIterationCount="1",t.style.animationFillMode="forwards"},e.updateElementDelay=function(t,e){t.style.animationDelay=e+"s"},e.attachAnimation=function(t,e,i){var n=this;void 0===i&&(i={animationTiming:"linear",animationStart:0,animationEnd:1});var r,s,o=i.animationStart<i.animationEnd?"normal":"reverse";return this.initializeAnimation(t,e,i.animationTiming,o),tt.onScrollChange$.pipe(D((function(){return n.getAnimationDelay(t,i.animationStart,i.animationEnd)})),(r=function(t){return t>=-100&&t<=0},function(t){return t.lift(new Q(r,s))})).subscribe((function(e){return n.updateElementDelay(t,e)}))},t}());class it{static get uA(){return navigator.userAgent.toLowerCase()}static get pf(){return navigator.platform.toLowerCase()}static get safari(){return/^((?!chrome|android).)*safari/.test(this.uA)}static get safariVersion(){return+(this.uA.match(/version\/[\d\.]+.*safari/)||["-1"])[0].replace(/^version\//,"").replace(/ safari$/,"")}static get firefox(){return this.uA.indexOf("firefox")>-1}static get chrome(){return/chrome/.test(this.uA)}static get ie(){return/msie|trident/.test(this.uA)}static get ieMobile(){return/iemobile/.test(this.uA)}static get webkit(){return/webkit/.test(this.uA)}static get operaMini(){return/opera mini/.test(this.uA)}static get edge(){return/edge\/\d./.test(this.uA)}static get ios(){return/ip(hone|[ao]d)/.test(this.uA)}static get mac(){return this.pf.indexOf("mac")>-1}static get windows(){return this.pf.indexOf("win")>-1}static get android(){return/android/.test(this.uA)}static get androidMobile(){return/android.*mobile/.test(this.uA)}static get blackberry(){return/blackberry/.test(this.uA)}static get mobile(){return this.ieMobile||this.blackberry||this.androidMobile||this.ios||this.operaMini}static get mouseWheelEvent(){return"onmousewheel"in document}static get wheelEvent(){return"onwheel"in document}static get keydownEvent(){return"onkeydown"in document}static get touchDevice(){return"ontouchstart"in window}static get mutationObserver(){return"MutationObserver"in window}static get client(){return"undefined"!=typeof window&&void 0!==window.document}}function nt(t,e,i){return Math.min(Math.max(t,e),i)}function rt(t,e,i){return t*(1-i)+e*i}function st(t,e){const i=t.toString();return parseFloat(i.substring(0,i.indexOf(".")+1+e))}function ot(t,e=0,i){let n,r=0;return(...s)=>{const o=(performance||Date).now();r&&o<r+e?(clearTimeout(n),n=setTimeout((function(){r=o,t.apply(i,s)}),e)):(r=o,t.apply(i,s))}}function at(t){return"number"==typeof t}function ht(t){const e=typeof t;return!function(t){return Array.isArray(t)}(t)&&("object"===e&&null!=t||"function"===e)}class ct{constructor(){this.listeners={},this.mutedEvents=[]}emit(t,e,i=(()=>{})){const n="function"==typeof e?e:i;if("string"==typeof t){const i=t;if(this.listeners.hasOwnProperty(i)&&!this.isEventMuted(i))for(let t=0,r=this.listeners[i].length;t<r;t++)n.call(this,this.listeners[i][t].call(this,e!==n?e:void 0))}else{const e=t,i=Object.keys(e);for(let t=0,r=i.length;t<r;t++){const r=i[t],s=e[r];if(this.listeners.hasOwnProperty(r)&&!this.isEventMuted(r))for(let t=0,e=this.listeners[r].length;t<e;t++)n.call(this,this.listeners[r][t].call(this,s))}}}on(t,e){return this.listeners.hasOwnProperty(t)?this.listeners[t].push(e):this.listeners[t]=[e],()=>this.off(t,e)}off(t,e){const i=this.listeners;if(i.hasOwnProperty(t)){const n=i[t].indexOf(e);n>-1&&i[t].splice(n,1)}}hasEventListeners(t){return this.listeners[t]&&this.listeners[t].length>0}isEventMuted(t){return this.mutedEvents.includes(t)}muteEvents(...t){return t.forEach(t=>{"string"!=typeof t||this.mutedEvents.includes(t)||this.mutedEvents.push(t)}),()=>this.unmuteEvents(...t)}unmuteEvents(...t){t.forEach(t=>{if("string"==typeof t){const e=this.mutedEvents.indexOf(t);e>-1&&this.mutedEvents.splice(e,1)}})}}function ut(t,e,i,n){return"string"==typeof e&&(e=[e]),e.forEach(e=>t.addEventListener(e,i,n)),()=>e.forEach(e=>{t.removeEventListener(e,i,n)})}function lt(...t){return()=>t.forEach(t=>"function"==typeof t&&t.call(void 0))}class dt{constructor(t){this.calllback=t,this.dead=!1}update(t,e){this.calllback(t,e,this.kill.bind(this))}kill(){this.dead=!0}}class pt{constructor(t){this.intervalMs=.06,this.ticking=!1,this.override=!1,this.threads=[],this.lastTime=-1,this.minDeltaMs=0,this.maxDeltaMs=100,t instanceof Array&&2===t.length&&(this.setMinFPS(t[0]),this.setMaxFPS(t[1])),"number"==typeof t&&this.setMaxFPS(t)}static requestAnimationFrame(t){return window.requestAnimationFrame?window.requestAnimationFrame(t):window.setTimeout(t,1e3/60)}static now(){return(window.performance||Date).now()}setMinFPS(t){const e=Math.max(Math.min(t,this.maxFPS),0);return this.maxDeltaMs=1/Math.min(e/1e3,this.intervalMs)}get minFPS(){return 1e3/this.maxDeltaMs}setMaxFPS(t){if(0===t)return this.minDeltaMs=0;const e=Math.max(t,this.minFPS);return this.minDeltaMs=1/(e/1e3)}get maxFPS(){return this.minDeltaMs>0?1e3/this.minDeltaMs:1e3*this.intervalMs}tick(t,e=pt.now()){const i=[];for(let n=0,r=this.threads.length;n<r;n++){const r=this.threads[n];r.dead?i.push(r):r.update(t,e)}for(let t=0,e=i.length;t<e;t++)this.buryThread(i[t])}update(t=pt.now()){if(t>this.lastTime){let e=t-this.lastTime;if(e>this.maxDeltaMs&&(e=this.maxDeltaMs),this.minDeltaMs&&e+1<this.minDeltaMs)return;this.tick(e*this.intervalMs,t)}this.lastTime=t}animate(){pt.requestAnimationFrame(t=>{this.update(t),this.ticking&&!this.override&&this.threads.length>0?this.animate():this.ticking=!1})}kill(){this.threads.forEach(t=>t.kill())}buryThread(t){this.threads.splice(this.threads.indexOf(t),1)}add(t){const e=new dt(t);return this.threads.push(e),this.ticking||this.override||(this.lastTime=pt.now(),this.ticking=!0,this.animate()),e}}class ft{constructor(t){this.size={width:0,height:0},this.offset={x:0,y:0},this._destroyed=!1,this.changeListeners=[],this.destroyListeners=[],this.lastSum=0,this.element=t instanceof ft?t.element:t}update(t=!1,e=!1){t?setTimeout(()=>this.updateDimensions(e)):this.updateDimensions(e)}onDestroy(t){this.destroyListeners.push(t)}updateDimensions(t){this.updateSize(),this.updateOffset(),(this.hasChanged()||t)&&this.emitChanges()}emitChanges(){for(let t=0,e=this.changeListeners.length;t<e;t++)this.changeListeners[t].call(this,this.size,this.offset)}removeListener(t){this.changeListeners=this.changeListeners.filter(e=>e!==t)}destroy(){this._destroyed=!0;for(let t=0,e=this.destroyListeners.length;t<e;t++)this.destroyListeners[t].call(this);this.changeListeners=[],this.destroyListeners=[]}get destroyed(){return this._destroyed}changed(t,e=0){return e>0&&(t=ot(t,e)),this.changeListeners.push(t),{remove:()=>this.removeListener(t)}}updateSize(){if(it.client){const t=this.element.getBoundingClientRect();this.size.width=t.width,this.size.height=t.height}else this.size.width=0,this.size.height=0}updateOffset(){if(it.client){const t=function(t){let e=0,i=0;do{e+=t.offsetLeft||0,i+=t.offsetTop||0,t=t.offsetParent}while(t);return{x:e,y:i}}(this.element);this.offset.x=t.x,this.offset.y=t.y}else this.offset.x=0,this.offset.y=0}hasChanged(){const t=this.offset.x+this.offset.y+this.size.width+this.size.height,e=t!==this.lastSum;return this.lastSum=t,e}inViewport(t,e,i={x:0,y:0}){const n=Object.assign({},this.offset),r={above:n.y+i.y+this.size.height<t.y,below:n.y-i.y>t.y+e.height,left:n.x+i.x+this.size.width<t.x,right:n.x-i.x>t.x+e.width};return Object.assign(Object.assign({},r),{inside:!(r.above||r.below||r.right||r.left)})}}class yt{static changed(t,e=0){return e>0&&(t=ot(t,e)),this.listeners.push(t),this.checkListeners(),{remove:()=>this.removeListener(t)}}static removeListener(t){const e=this.listeners.indexOf(t);e>-1&&(this.listeners.splice(e,1),this.checkListeners())}static checkListeners(){this.listening=this.listeners.length>0}static set listening(t){t&&!this._listening?this.attach():!t&&this._listening&&this.detach(),this._listening=t}static get attached(){return this._listening}static get state(){return this.stateResolver.promise}static update(t=!1,e=!1){it.client&&(this._state.width=window.innerWidth,this._state.height=window.innerHeight),this.stateResolver.completed||this.stateResolver.resolve(this._state),e||this.handleResize(t)}static getStateSum(){return this._state.width+this._state.height}static handleResize(t=!1){cancelAnimationFrame(this.lastRafId);const e=this.getStateSum();this.lastRafId=requestAnimationFrame(()=>{if(this.update(),e!==this.getStateSum()||!0===t)for(let t=0,e=this.listeners.length;t<e;t++)this.listeners[t].call(this,this._state)})}static attach(){this.resizeListener||(this.handleResize(),this.resizeListener=()=>this.handleResize(),it.client&&window.addEventListener("resize",this.resizeListener,!0))}static detach(){this.resizeListener&&(it.client&&window.removeEventListener("resize",this.resizeListener,!0),this.resizeListener=void 0)}}yt._listening=!1,yt._state={width:0,height:0},yt.lastRafId=-1,yt.listeners=[],yt.stateResolver=new class{constructor(){this._completed=!1,this.promise=new Promise((t,e)=>{this._resolve=t,this._reject=e})}resolve(t){if(this._completed)throw new Error("Can't resolve promise. Already completed");return this._completed=!0,this._resolve(t),this.promise}reject(t){if(this._completed)throw new Error("Can't reject promise. Already completed");return this._completed=!0,this._reject(t),this.promise}get completed(){return this._completed}};const bt={mutationThrottle:100,viewportThrottle:100,mutators:[{target:it.client?document.documentElement:void 0,options:{characterData:!0,childList:!0,subtree:!0}}]};class mt{constructor(t={}){this.config=t,this.attached=!1,this.states=[]}static observe(t){return this.default.observe(t)}static reset(){return this.default.reset()}observe(t){for(let e=0,i=this.states.length;e<i;e++)if(this.states[e]===t||this.states[e].element===t)return this.states[e];return this.register(t instanceof ft?t:new ft(t))}register(t){return this.states.push(t),this.checkStates(),t.update(!0),t.onDestroy(()=>this.deregister(t)),t}deregister(t){const e=this.states.indexOf(t);e>-1&&(this.states.splice(e,1),this.checkStates())}reset(){this.states.forEach(t=>this.deregister(t))}updateRaf(){it.client?(cancelAnimationFrame(this.lastRaf),this.lastRaf=requestAnimationFrame(()=>this.update())):this.update()}update(t=!1){for(let e=0,i=this.states.length;e<i;e++)this.states[e].update(t)}attach(){if(this.attached=!0,this.viewportObserver=yt.changed("number"==typeof this.config.viewportThrottle?ot(()=>this.update(),this.config.viewportThrottle):()=>this.update()),it.client&&it.mutationObserver&&this.config.mutators){const t=this.config.mutationThrottle;this.mutationObserver=new MutationObserver("number"==typeof t?ot(()=>this.updateRaf(),t):()=>this.updateRaf()),this.config.mutators.forEach(t=>{t.target&&this.mutationObserver&&this.mutationObserver.observe(t.target,Object.assign({},t.options))})}let t;it.client&&document.addEventListener("DOMContentLoaded",t=()=>{this.updateRaf(),document.removeEventListener("DOMContentLoaded",t)},!1),this.updateRaf()}detach(){this.attached=!1,this.viewportObserver&&(this.viewportObserver.remove(),this.viewportObserver=void 0),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=void 0)}checkStates(){this.states.length>0&&!this.attached&&this.attach(),0===this.states.length&&this.attached&&this.detach()}}mt.default=new mt(bt);const vt={in:(t,e,i,n)=>-i*Math.cos(t/n*(Math.PI/2))+i+e,out:(t,e,i,n)=>i*Math.sin(t/n*(Math.PI/2))+e},gt={in:(t,e,i,n)=>0===t?e:i*Math.pow(2,10*(t/n-1))+e,out:(t,e,i,n)=>t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e},wt={in:(t,e,i,n)=>-i*(Math.sqrt(1-(t/=n)*t)-1)+e,out:(t,e,i,n)=>i*Math.sqrt(1-(t=t/n-1)*t)+e},Tt={in:(t,e,i,n)=>i-Tt.out(n-t,0,i,n)+e,out:(t,e,i,n)=>(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e};var xt=Object.freeze({__proto__:null,Linear:{none:(t,e,i,n)=>i*t/n+e},Quad:{in:(t,e,i,n)=>i*(t/=n)*t+e,out:(t,e,i,n)=>-i*(t/=n)*(t-2)+e},Cubic:{in:(t,e,i,n)=>i*(t/=n)*t*t+e,out:(t,e,i,n)=>i*((t=t/n-1)*t*t+1)+e},Quart:{in:(t,e,i,n)=>i*(t/=n)*t*t*t+e,out:(t,e,i,n)=>-i*((t=t/n-1)*t*t*t-1)+e},Quint:{in:(t,e,i,n)=>i*(t/=n)*t*t*t*t+e,out:(t,e,i,n)=>i*((t=t/n-1)*t*t*t*t+1)+e},Sine:vt,Expo:gt,Circ:wt,Back:{in:(t,e,i,n,r=1.70158)=>i*(t/=n)*t*((r+1)*t-r)+e,out:(t,e,i,n,r=1.70158)=>i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},Bounce:Tt});class _t{constructor(t,e,i){this.target=t,this.values=e,this.options=i,this.registry=_t.registry,this.ticker=_t.ticker,this.changes={},this.firstTick=!1,this._paused=!1,this._complete=!1,this._passed=0,this.stableTarget=Object.assign({},t),this.createThread()}static fromTo(t,e,i={}){return new _t(t,e,i)}get easing(){return this.options.easing||wt.out}get duration(){return"number"==typeof this.options.duration?this.options.duration:100}get paused(){return this._paused}get complete(){return this._complete}get passed(){return this._passed}set passed(t){this._passed=Math.min(t,this.duration),this.handleTick(this.currentTarget)}get progress(){return this.passed/this.duration}set progress(t){this.passed=this.duration*t}runCallback(t,...e){this.options.on&&"function"==typeof this.options.on[t]&&this.options.on[t].apply(this,e)}createDelay(t){const e=pt.now();return this.delay=this.ticker.add((i,n,r)=>{if(this._paused)return;const s=n-e;s>=t?(this.runCallback("delay",t),delete this.delay,r()):this.runCallback("delay",s)})}overwriteTarget(t){const e=this.registry.get(t);e instanceof _t&&(e.stop(),this.registry.delete(t),this.runCallback("overwrite"))}createThread(){this.thread&&!this.thread.dead&&this.thread.kill(),this.changes=function(t,e){const i={};for(const n in t)if(t.hasOwnProperty(n)&&e.hasOwnProperty(n)){const r=e[n]-t[n];0!==r&&(i[n]=r)}return i}(this.target,this.values),this.currentTarget=!1===this.options.mutate?Object.assign({},this.target):this.target;const t=0!==Object.keys(this.changes).length;return!1!==this.options.overwrite&&this.overwriteTarget(this.target),this.registry.set(this.target,this),this.firstTick=!0,this._complete=!1,this._passed=0,!0===this.options.paused&&this.pause(),this.delay&&(this.delay.kill(),delete this.delay),"number"==typeof this.options.delay&&(this.runCallback("update",this.currentTarget,this.progress),this.createDelay(this.options.delay)),this.thread=this.ticker.add((e,i,n)=>{this._paused||this.delay||(t?this.passed+=e/_t.ticker.intervalMs:n())})}handleTick(t){this.firstTick&&(this.runCallback("start"),this.firstTick=!1),this.passed>=0&&this.processChanges(t,t=>this.easing.call(this,this._passed,this.stableTarget[t],this.changes[t],this.duration)),this._passed>=0&&this._passed>=this.duration&&(this.thread&&!this.thread.dead&&this.thread.kill(),this.processChanges(t,t=>this.values[t]),this.runCallback("complete"),this._complete=!0)}processChanges(t,e){for(const i in this.changes)this.changes.hasOwnProperty(i)&&(t[i]=e(i));this.runCallback("update",t,this.progress)}stop(){return this.thread&&!this.thread.dead&&(this.thread.kill(),this.runCallback("stop")),this}start(){return this._paused&&(this._paused=!1,this.thread&&!this.thread.dead&&this.runCallback("start")),this}pause(){return this._paused||(this._paused=!0,this.thread&&!this.thread.dead&&this.runCallback("pause")),this}reset(){if(!1!==this.options.mutate)for(const t in this.stableTarget)this.stableTarget.hasOwnProperty(t)&&(this.target[t]=this.stableTarget[t]);return this.runCallback("reset"),this.createThread(),this}}_t.ticker=new pt,_t.registry=new WeakMap;const Et=Object.assign({},xt),Ot={};for(const t in Et)if(Et.hasOwnProperty(t))for(const e in Et[t])Et[t].hasOwnProperty(e)&&(Ot[`${t}.${e}`]=Et[t][e]);var St,At;!function(t){t.RECALC="recalc"}(St||(St={}));class kt extends ct{constructor(t){super(),this.config=t,this.dynamic=!1,this.dynamic=t.element instanceof HTMLElement,!1!==t.observer&&(this.observer=new mt(t.observer)),this.container=new ft(this.dynamic?document.createElement("div"):t.element.container),this.wrapper=new ft(this.dynamic?document.createElement("div"):t.element.wrapper),this.observer&&(this.container=this.observer.observe(this.container),this.wrapper=this.observer.observe(this.wrapper),this.wrapper.changed(()=>this.emit(St.RECALC)),this.container.changed(()=>this.emit(St.RECALC))),this.dynamic&&(this.container.element.className+="smoovy-container",this.wrapper.element.className+="smoovy-wrapper",this.container.element.appendChild(this.wrapper.element))}recalc(t=!1){this.wrapper.update(t),this.container.update(t)}attach(){if(this.dynamic){const t=this.config.element,e=Array.from(t.childNodes);t.appendChild(this.container.element),this.wrapper.element.append(...e)}}detach(){if(this.dynamic){const t=this.config.element,e=Array.from(this.wrapper.element.childNodes);t.append(...e),t.removeChild(this.container.element)}}}!function(t){t.DELTA="delta",t.OUTPUT="output",t.VIRTUAL="virtual",t.RECALC="recalc",t.TWEEN_TO="tween_to",t.SCROLL_TO="scroll_to",t.TRANSFORM_DELTA="~delta",t.TRANSFORM_VIRTUAL="~virtual",t.TRANSFORM_OUTPUT="~output"}(At||(At={}));class Lt extends ct{constructor(t,e){super(),this.attached=!1,this.locks=[],this.availableBehaviors=new Map,this.attachedBehaviors=new Map,this.position={output:{x:0,y:0},virtual:{x:0,y:0}},this.dom=t instanceof kt?t:new kt(t instanceof HTMLElement?{element:t}:t);for(const t in e)e.hasOwnProperty(t)&&this.setBehavior(t,e[t]);this.attach()}attach(){this.attached||(this.attached=!0,this.unlisten=lt(this.dom.on(St.RECALC,()=>{this.updateDelta({x:0,y:0}),pt.requestAnimationFrame(()=>this.emit(At.RECALC))}),this.on(At.DELTA,t=>{this.isLocked()||this.updateDelta(t)})),this.dom.attach(),this.availableBehaviors.forEach((t,e)=>{this.attachBehavior(e)}))}destroy(){this.attached&&(this.attached=!1,"function"==typeof this.unlisten&&(this.unlisten(),delete this.unlisten),this.dom.detach(),this.attachedBehaviors.forEach(t=>{"function"==typeof t&&t.call(this)}))}recalc(t=!1){this.dom.recalc(t),t?pt.requestAnimationFrame(()=>this.emit(At.RECALC)):this.emit(At.RECALC)}get behaviors(){return this.availableBehaviors}setBehavior(t,e){this.availableBehaviors.set(t,e)}deleteBehavior(t){return this.attachedBehaviors.has(t)&&this.detachBehavior(t),this.availableBehaviors.delete(t)}attachBehavior(t){const e=this.availableBehaviors.get(t);return!(!e||this.attachedBehaviors.get(t)||(this.attachedBehaviors.set(t,e(this)),0))}detachBehavior(t){const e=this.attachedBehaviors.get(t);return!!e&&(e.call(this),this.attachedBehaviors.delete(t),!0)}updateDelta(t){const e=this.position.virtual;this.emit(At.TRANSFORM_DELTA,t,e=>{t.x=e.x,t.y=e.y}),this.updatePosition({x:at(t.x)?e.x-t.x:void 0,y:at(t.y)?e.y-t.y:void 0})}updatePosition(t){t&&at(t.x)&&(this.position.virtual.x=t.x),t&&at(t.y)&&(this.position.virtual.y=t.y),this.emit(At.VIRTUAL,this.position.virtual),this.emit(At.TRANSFORM_VIRTUAL,this.position.virtual,t=>{this.position.virtual.x=t.x,this.position.virtual.y=t.y}),this.isEventMuted(At.TRANSFORM_OUTPUT)||!this.hasEventListeners(At.TRANSFORM_OUTPUT)?this.updateOutput(this.position.virtual):this.emit(At.TRANSFORM_OUTPUT,{pos:this.position.output,step:t=>this.updateOutput(t)})}updateOutput(t){this.position.output.x=t.x,this.position.output.y=t.y,this.emit(At.OUTPUT,t)}lock(t="default",e=!0){!this.locks.includes(t)&&e?this.locks.push(t):e||this.unlock(t)}unlock(t="default"){const e=this.locks.indexOf(t);e>-1&&this.locks.splice(e,1)}isLocked(t){return t?this.locks.includes(t):this.locks.length>0}scrollTo(t,e=!1){this.emit(At.SCROLL_TO,{pos:t,skipOutputTransform:e})}tweenTo(t,e={}){this.emit(At.TWEEN_TO,{pos:t,options:e})}onVirtual(t){return this.on(At.VIRTUAL,t)}onScroll(t){return this.on(At.OUTPUT,t)}onDelta(t){return this.on(At.DELTA,t)}}const Mt=(t={})=>e=>{const i=t.focusTarget||it.client?window:void 0,n=e.dom.container.element,r=t.ignoreInside||[];return lt(ut(n,"scroll",t=>{t.preventDefault(),n.scrollLeft=n.scrollTop=0}),i?ut(i,"focus",i=>{pt.requestAnimationFrame(()=>{const s=i.target;if(s instanceof HTMLElement&&(!r.map(t=>t.contains(s)).includes(!0)&&s&&n.contains(s)||n===s)){const i=s.getBoundingClientRect(),n=e.dom.container.size;if(i.top<=0||i.top>=n.height||i.left<=0||i.right>=n.width)if(t.nativeTarget){const r=e.position.virtual;t.nativeTarget.scrollTo(r.x+i.left-n.width/2,r.y+i.top-n.height/2)}else e.emit(At.DELTA,{y:-i.top+n.height/2,x:-i.left+n.width/2})}})},!0):void 0)};const Ct={condition:()=>!1},Dt=(t={})=>{const e=Object.assign(Ct,t);let i;return i=t=>{const n=e.target||window,r=[];let s;const o=()=>({x:n===window?n.scrollX:n.scrollLeft,y:n===window?n.scrollY:n.scrollTop}),a=()=>{e.condition()?(t.behaviors.forEach((e,n)=>{e!==i&&(t.detachBehavior(n),r.push(n))}),s=lt(ut(n,"scroll",()=>{const e=o();t.emit(At.DELTA,{x:t.position.virtual.x-e.x,y:t.position.virtual.y-e.y})}),t.on(At.SCROLL_TO,({pos:t})=>{if(at(t.x)||at(t.y)){const e=o();n.scrollTo(at(t.x)?t.x:e.x,at(t.y)?t.y:e.y)}})),t.on(At.TWEEN_TO,({pos:e,options:i})=>{const n=!!i.force;let r;const s=()=>{r&&!n&&(r.stop(),r=void 0)},o=lt(ut(window,"touchstart",s),ut(window,"wheel",s),ut(window,"keydown",t=>{const e=function(t,e=100,i=250,n=200,r=1/0){const s={x:0,y:0};switch(t.key){case" ":s.y=-n;break;case"ArrowLeft":s.x=e;break;case"ArrowRight":s.x=-e;break;case"ArrowDown":s.y=-e;break;case"ArrowUp":s.y=e;break;case"PageDown":s.y=-i;break;case"PageUp":s.y=i;break;case"Home":s.y=r;break;case"End":s.y=-r}return s}(t);"Tab"!==t.key&&0===e.x&&0===e.y||s()}));r=_t.fromTo(t.position.virtual,e,{mutate:!1,duration:i.duration,easing:i.easing,on:{update:t=>window.scrollTo(t.x,t.y),complete:o,stop:o}})})):r.length>0&&(s&&(s(),s=void 0),r.forEach(e=>t.attachBehavior(e)),pt.requestAnimationFrame(()=>t.dom.recalc()))};setTimeout(()=>a()),t.on(At.RECALC,()=>a())}},Pt={damping:.1,precision:.009,mobileDamping:.18},Rt=(t={})=>{const e=Object.assign(Pt,t);return t=>{let i;const n=e.ticker||new pt,r=it.mobile?e.mobileDamping:e.damping,s=t.on(At.TRANSFORM_OUTPUT,({pos:s,step:o})=>{i&&i.kill(),i=n.add((i,n,a)=>{const h=t.position.virtual,c=rt(s.x,h.x,r),u=rt(s.y,h.y,r),l=Math.abs(h.x-c),d=Math.abs(h.y-u);l<e.precision&&d<e.precision&&a(),o({x:c,y:u})})});return()=>{s(),n.kill()}}},It=(t={})=>e=>e.on(At.SCROLL_TO,i=>{let n;i.skipOutputTransform&&(n=e.muteEvents(At.TRANSFORM_OUTPUT));const r=e.position.virtual;if(t.nativeTarget){const e={};"number"==typeof i.pos.x&&(e.left=i.pos.x),"number"==typeof i.pos.y&&(e.top=i.pos.y),t.nativeTarget.scrollTo(Object.assign({behavior:t.nativeBehavior||"smooth"},e))}else{const t={};"number"==typeof i.pos.x&&(t.x=-(i.pos.x-r.x)),"number"==typeof i.pos.y&&(t.y=-(i.pos.y-r.y)),e.updateDelta(t)}pt.requestAnimationFrame(()=>{n&&n()})}),Ft={defaults:{width:"100%",height:"100%",overflow:"hidden"}},jt=(t={})=>{const e=function t(e,...i){if(!i.length)return e;const n=i.shift();if(ht(e)&&ht(n))for(const i in n)ht(n[i])?(e[i]||Object.assign(e,{[i]:{}}),t(e[i],n[i])):Object.assign(e,{[i]:n[i]});return t(e,...i)}(Ft,t);return t=>{const i=t.dom.container.element;for(const t in e.defaults)e.defaults.hasOwnProperty(t)&&(i.style[t]=e.defaults[t]);return()=>{for(const t in e.defaults)e.defaults.hasOwnProperty(t)&&(i.style[t]="")}}},zt={firefoxFix:!0,initialStyles:!0,precision:2},Nt=(t,e=0,i=0,n=!1)=>{let r=`translate3d(${-e}px, ${-i}px, 0)`;n&&(r+=" rotate3d(0.01, 0.01, 0.01, 0.01deg)"),t.style.transform=r},Ut=(t={})=>{const e=Object.assign(zt,t),i=e.firefoxFix&&it.firefox;return t=>{const n=t.dom.wrapper.element,r=t.on(At.OUTPUT,t=>{const r=st(t.x,e.precision),s=st(t.y,e.precision);Nt(n,r,s,i)});return e.initialStyles&&Nt(n,0,0,i),()=>{n.style.transform="",r()}}},Bt=(t={})=>e=>{let i;return e.on(At.TWEEN_TO,({pos:n,options:r})=>{const s=!!r.force,o=lt(void 0===t.nativeTarget?lt(e.on(At.DELTA,()=>{i&&!s&&i.stop()}),e.muteEvents(At.TRANSFORM_OUTPUT,s&&At.DELTA)):ut(t.nativeTarget,t.nativeKillEvents||["wheel","touchmove"],()=>{i&&!s&&i.stop()}));i&&i.stop(),i=_t.fromTo(e.position.virtual,n,{mutate:!1,duration:r.duration,easing:r.easing,on:{update:i=>{t.nativeTarget?t.nativeTarget.scrollTo(i.x,i.y):e.updateDelta({x:e.position.virtual.x-i.x,y:e.position.virtual.y-i.y})},stop:()=>{o(),i=void 0},complete:()=>{o(),i=void 0}}})})},Vt={target:it.client?window:void 0},Ht=(t={})=>{const e=Object.assign(Vt,t);return t=>{const i=document.createElement("div"),n=t.dom.container.element.parentElement,r=()=>{i.style.height=t.dom.wrapper.size.height+"px"};return r(),n&&n.append(i),lt(()=>i.remove(),e.target?ut(e.target,"scroll",()=>t.emit(At.DELTA,{x:t.position.virtual.x-window.scrollX,y:t.position.virtual.y-window.scrollY})):void 0,t.on(At.RECALC,r))}};window.onload=()=>{const t=((t,e={})=>new Lt(t,Object.assign({clampContent:t=>t.on(At.TRANSFORM_VIRTUAL,e=>{const i=t.dom.wrapper.size,n=t.dom.container.size,r=Math.max(i.width-n.width,0),s=Math.max(i.height-n.height,0);return{x:nt(e.x,0,r),y:nt(e.y,0,s)}}),nativeScrollbar:Ht(e.scrollbar),lerpContent:Rt(e.lerp),bypassNative:Dt(Object.assign({condition:()=>it.mobile},e.native)),translate:Ut(e.translate),tweenTo:Bt(Object.assign({nativeTarget:it.client?window:void 0},e.tweenTo)),scrollTo:It(Object.assign({nativeTarget:it.client?window:void 0},e.scrollTo)),bypassFocus:Mt(Object.assign({nativeTarget:it.client?window:void 0},e.focus)),styleContainer:jt({defaults:Object.assign({position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"},e.styles)})},e.behaviors||{})))({element:document.querySelector(".sections")});tt.initializeFromCallbackFn(t.onScroll.bind(t));const e=document.querySelectorAll("[data-keyscroll]");for(const t of e){const e=t.getAttribute("data-keyscroll"),i=+(t.getAttribute("data-keyscroll-start")||0),n=+(t.getAttribute("data-keyscroll-end")||1);et.attachAnimation(t,e,{animationTiming:"linear",animationStart:i,animationEnd:n})}}}();
//# sourceMappingURL=bundle.js.map
